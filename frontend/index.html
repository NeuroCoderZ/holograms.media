<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Holograms Media</title>
  <link rel="stylesheet" href="style.css">
  <!-- Favicon and Meta -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <meta property="og:title" content="Holograms Media">
  <meta property="og:description" content="Interactive 3D Audio Visualizations">
  <meta property="og:image" content="/og-image.jpg">
  <meta property="og:url" content="https://holograms.media/">
  <meta property="og:type" content="website">

  <!-- Import Map -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.module.js",
      "three/examples/jsm/loaders/GLTFLoader.js": "https://cdn.jsdelivr.net/npm/three@0.128.0/examples/jsm/loaders/GLTFLoader.js"
    }
  }
  </script>
  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.umd.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
  <!-- MediaPipe Hands -->
  <!-- <script src="https://unpkg.com/@mediapipe/hands@0.4.1646424915/hands.js"></script> -->
</head>
<body>


  <!-- Центральная область -->
  <div class="main-area">
    <!-- Область Голограммы -->
    <div id="grid-container"></div>
    <!-- Панель Кнопок (под голограммой) -->
    <div id="button-container">
        <button id="fileButton" class="control-button" title="Загрузить аудиофайл" aria-label="Upload File"><img src="/icons/buttons/1.svg" alt="Upload"></button>
        <input type="file" id="fileInput" accept="audio/*" style="display: none;">
        <button id="playButton" class="control-button" title="Воспроизвести" disabled aria-label="Play"><img src="/icons/buttons/2.svg" alt="Play"></button>
        <button id="pauseButton" class="control-button" title="Пауза" disabled aria-label="Pause"><img src="/icons/buttons/3.svg" alt="Pause"></button>
        <button id="stopButton" class="control-button" title="Стоп" disabled aria-label="Stop"><img src="/icons/buttons/4.svg" alt="Stop"></button>
        <button id="micButton" class="control-button" title="Микрофон (Вкл/Выкл)" aria-label="Toggle Microphone"><img src="/icons/buttons/5.svg" alt="Microphone"></button>
        <button id="fullscreenButton" class="control-button" title="Полноэкранный режим" aria-label="Fullscreen"><img src="/icons/buttons/6.svg" alt="Полноэкранный режим"></button>
        <button id="xrButton" class="control-button" title="Режим AR/VR (Эксперимент)" aria-label="XR Mode"><img src="/icons/buttons/7.svg" alt="Режим AR/VR"></button>
        <button id="gestureRecordButton" class="control-button" title="Запись жеста (В разработке)" aria-label="Record Gesture"><img src="/icons/buttons/8.svg" alt="Record Gesture"></button>
        <button id="hologramListButton" class="control-button" title="Ваши голограммы (В разработке)" aria-label="Your Holograms"><img src="/icons/buttons/9.svg" alt="Your Holograms"></button>
        <button id="scanButton" class="control-button" title="Сканировать QR (В разработке)" aria-label="Scan QR"><img src="/icons/buttons/10.svg" alt="Scan QR"></button>
        <button id="bluetoothButton" class="control-button" title="Подключить Bluetooth (Неактивно)" aria-label="Bluetooth"><img src="/icons/buttons/12.svg" alt="Bluetooth"></button>
        <button id="triaButton" class="control-button" title="Ассистент Триа (В разработке)" aria-label="Tria AI"><img src="/icons/buttons/11.svg" alt="Триа AI"></button>
        <a href="https://t.me/+WjtL4ipr-yljNGRi" target="_blank" rel="noopener noreferrer" style="display: contents;">
          <button id="telegramLinkButton" class="control-button" title="Перейти в Telegram Канал" aria-label="Telegram Link"><img src="/icons/buttons/13.svg" alt="Telegram"></button>
        </a>
        <button id="installPwaButton" class="control-button" title="Установить на устройство" aria-label="Install PWA"><img src="/icons/buttons/14.svg" alt="Install PWA"></button>
    </div>
  </div>

  <!-- Правая панель: Таймлайн и Промпт -->
  <div class="panel right-panel"> <!-- Добавлены классы -->
    <!-- Таймлайн -->
    <div id="versionTimeline">
      <div id="versionFrames"></div>
    </div>
    
    <!-- Интегрированный редактор файлов (скрыт по умолчанию) -->
    <div id="integratedFileEditor" style="display: none; border-top: 1px solid var(--panel-border); padding: var(--padding); max-height: 200px; overflow-y: auto;">
        <h3>Project Files</h3>
        <ul id="fileList">
            <li data-file="script.js">script.js</li>
            <li data-file="style.css">style.css</li>
            <li data-file="index.html">index.html</li>
        </ul>
        <div id="fileEditor">
            <textarea id="fileContent" rows="8" spellcheck="false"></textarea>
            <button id="saveFile">Save</button>
        </div>
    </div>

    <!-- Панель Промпта -->
    <div id="promptBar">
        <textarea id="topPromptInput" rows="3" placeholder="Что бы вы хотели изменить?"></textarea>
        <div class="prompt-controls">
          <select id="modelSelect">
            <option value="r1">DeepSeek R1</option>
            <option value="gemini">Gemini Flash 2.0</option>
          </select>
          <button id="submitTopPrompt">Применить</button>
        </div>
    </div>
  </div>

  <!-- Модальные окна (остаются вне основного макета) -->
  <div id="gestureModal" class="modal">
    <div class="modal-content">
      <span id="closeGestureModal" class="close">×</span>
      <h2>Record Gesture</h2>
      <canvas id="gestureCanvas" width="300" height="300"></canvas>
      <p id="gestureStatus">Press Start to record gesture...</p>
      <button id="startRecordingButton">Start Recording</button>
      <button id="stopRecordingButton" disabled>Stop Recording</button>
    </div>
  </div>
  <div id="promptModal" class="modal">
    <div class="modal-content">
      <span id="closePromptModal" class="close">×</span>
      <h2>Enter Prompt</h2>
      <textarea id="promptText" rows="4" placeholder="Enter your prompt here..."></textarea>
      <button id="submitPrompt">Отправить</button>
    </div>
  </div>

  <!-- Скрытые элементы -->
  <video id="camera-view" autoplay playsinline style="display: none;"></video>
  <canvas id="previewCanvas" style="display: none;"></canvas>

  <!-- Основной скрипт -->
  <script type="module" src="script.js?v=1.0"></script>

</body>
</html>
