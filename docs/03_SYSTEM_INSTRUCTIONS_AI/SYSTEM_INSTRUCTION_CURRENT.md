Системная Инструкция: Проект "Голографические Медиа" (holograms.media) – Версия 33.0 (Deadline Sprint & Tria Foundation Update)
Дата: 09.06.2025

A. Общая Шапка Документа
(Версия и дата обновлены выше)

B. Финальный Вектор Развития (Актуализировано, с сохранением R&D из v30.0++)
- **Основной концептуальный документ:** docs/02_RESEARCH/WHITEGHOST.md, описывающий "Технологию Трехмерной Аудиовизуализации", жестовую ОС и принципы AI "Триа".
- **Базовый концептуальный документ**: `docs/00_OVERVIEW_AND_CONTEXT/CONCEPT_AND_PHILOSOPHY.md` является первоисточником концепции и философии проекта.
- Интеграция подхода NVIDIA к преодолению разрыва между симуляцией и реальностью (sim-to-real gap) – **долгосрочное R&D**.
- Обучение ИИ-ассистента "Триа" на "комбинированных аудиовизуально-жестовых фрагментах" (чанках), обрабатываемых через **бэкенд на Koyeb (FastAPI, Hobby Plan, Frankfurt)**.
- Использование **CWT на WebAssembly** для профессионального анализа звука (цель R&D), с последующим рендерингом через WebGPU.
- Разработка интуитивных жестовых интерфейсов (включая поддержку русского жестового языка – РЖЯ – R&D, базовая интеграция MediaPipe Hands для текущего этапа).
- Создание самообучающейся сети ботов "Триа" (концепции AZR, "жидкий код" – долгосрочно, текущий этап фокусируется на простой логике Триа **на FastAPI (размещенном на Koyeb)** с перспективой использования Genkit).
- Внедрение децентрализованной экономической системы "HoloGraph" (долгосрочное R&D).
- **Текущая архитектура**:
    - **Frontend**: Firebase Hosting.
    - **Backend**: **Koyeb (Hobby Plan, Frankfurt)** (FastAPI на Python 3.11+, развертывание через GitHub, возможно с использованием Docker).
    - **Database**: Neon.tech PostgreSQL.
    - **File Storage**: **Backblaze B2** (S3-совместимое).
    - **Authentication**: Firebase Authentication.
- **Основной фокус**: Использование бесплатных или очень экономичных тиров для текущей реализации **без требования банковской карты** на всех указанных сервисах.
- Использование Genkit как целевого фреймворка для оркестрации AI-логики Триа и взаимодействия с моделями Google AI (например, Gemini) после текущего этапа.
- Интеграция NLWeb как перспективной технологии для связи Триа с веб-ресурсами с целью извлечения знаний (R&D).

C. Версия проекта (ориентировочная): ~0.5.x (Целевой этап к 9 июня 2025. Основное внимание: работающий цикл аутентификации пользователя через **Firebase Auth**, загрузка "чанков" в **Backblaze B2**, базовая обработка Триа через **FastAPI на Koyeb (Hobby Plan, Frankfurt)** с ответом, аудио-реактивная визуализация голограммы на Firebase Hosting, сохранение пользовательских данных в Neon.tech PostgreSQL).

Репозиторий: https://github.com/NeuroCoderZ/holograms.media

D. Развертывание:
-   **Frontend**: Firebase Hosting (URL будет определен после деплоя).
-   **Backend**: **Koyeb (Hobby Plan, Frankfurt)** (FastAPI приложение, развертывание через GitHub, URL вида `<app-name>-<org-name>.koyeb.app`).
-   **Database**: Neon.tech PostgreSQL (внешний доступ с Koyeb).
-   **File Storage**: **Backblaze B2** (доступ через API S3 из Koyeb).
-   **Authentication**: Firebase Authentication (интеграция с фронтендом и бэкендом).

Ключевые Документы Контекста:
- `docs/02_RESEARCH/WHITEGHOST.md` (Технология Трехмерной Аудиовизуализации, жестовая ОС, AI "Триа")
- `docs/00_OVERVIEW_AND_CONTEXT/CONCEPT_AND_PHILOSOPHY.md` (Концепция и философия проекта – первоисточник)
- `docs/00_OVERVIEW_AND_CONTEXT/PROJECT_CONTEXT.md` (Общее состояние, цели)
- `docs/05_PLANNING_AND_TASKS/ULTIMATE_ROAD_TO_MVP_JUNE_9.md` (Текущий операционный план)
- `docs/01_ARCHITECTURE/SYSTEM_ARCHITECTURE.md` (Архитектура потоков данных и взаимодействия)
- `docs/01_ARCHITECTURE/MODULE_CATALOG.md` (Каталог модулей фронтенда)
- `docs/02_RESEARCH/TRIA_CONCEPT.md` (Концепция Триа, "медленное обучение", AZR и взаимодействие ботов)
- `docs/02_RESEARCH/DEEP_RESEARCH_SYSTEM_BLUEPRINT_RU.md` (DRSB, долгосрочное видение, включая концепции FUTUREARCHITECTURE)
- `docs/00_OVERVIEW_AND_CONTEXT/ROADMAP.md` (Дорожная карта)
- `docs/04_REPORTS_AND_LOGS/generated_prompts.md` (Сгенерированные промпты для AI, включая "пакетные промпты")
(Эти документы регулярно актуализируются агентом NeuroCoderZ и AI-ассистентами).

E. ПРЕАМБУЛА: МАНИФЕСТ ПРОЕКТА "ГОЛОГРАФИЧЕСКИЕ МЕДИА"
Мы стоим на пороге новой эры коммуникации... Для текущей реализации мы используем комбинацию экономичных и мощных сервисов: **Koyeb для бэкенда (Hobby Plan, Frankfurt), Backblaze B2 для хранения файлов, Neon.tech для базы данных, и Firebase для хостинга фронтенда и аутентификации, стремясь к использованию бесплатных тиров без необходимости предоставления банковской карты.**

Центральной фигурой этой экосистемы является AI-ассистент "Триа". Триа задумана как **самообучающаяся жестовая лингвистическая модель**, развивающаяся через принципы "медленного обучения" и Absolute Zero Reasoning (AZR). На текущем этапе ее основа реализована как FastAPI приложение на Koyeb, обрабатывающее "комбинированные аудиовизуально-жестовые чанки" и предоставляющее базовые ответы, закладывая фундамент для будущей эволюции.

Мы верим в силу открытого исходного кода (лицензия MIT) и совместной работы сообщества...

I. Введение: Обзор, Цели и Философия Проекта
1.1. Общая Концепция
Проект "Голографические Медиа" (holograms.media) — это амбициозная исследовательская и девелоперская инициатива... Платформа реализуется с использованием следующего стека, ориентированного на доступность и бесплатные тиры:
-   **Бэкенд**: **FastAPI приложение на Python (3.11+), развернутое на Koyeb (Hobby Plan, Frankfurt) через GitHub (потенциально с использованием Docker).**
-   **База данных**: **Neon.tech PostgreSQL + pgvector**, доступная из Koyeb, для хранения пользовательских данных, метаданных чанков и векторных эмбеддингов.
-   **Файловое хранилище**: **Backblaze B2** (S3-совместимое), доступ через API (например, `boto3`) из Koyeb, для хранения "чанков".
-   **Фронтенд**: Статическое веб-приложение на **Firebase Hosting**, обеспечивающее пользовательский интерфейс.
-   **Аутентификация**: **Firebase Authentication** для управления пользователями.
-   **AI "Триа" (текущий этап)**: Основа Триа, как **самообучающейся жестовой лингвистической модели** с принципами "медленного обучения" и AZR, реализуется через логику на FastAPI эндпоинтах. Эта логика использует API ключи для доступа к LLM (например, Mistral) и включает внутреннюю сеть специализированных ботов (см. `backend/tria_bots/`: `GestureBot`, `MemoryBot`, `LearningBot` с компонентами AZR - `TaskGenerator`, `TaskSolver`, `azr_evaluator`), оркестрируемых `CoordinationService`. Поддерживающие сервисы (`NLPService` и др. в `backend/services/`) также способствуют расширению возможностей Триа.

Ключевая идея проекта – преодоление симуляционно-реального разрыва в обучении AI "Триа"...

Технологическая основа проекта (текущий стек и долгосрочные цели, с сохранением деталей из v30.0++):
...
**Бэкенд-технологии**: **FastAPI на Koyeb (Python 3.11+, Hobby Plan, Frankfurt).**
**База данных**: **Neon.tech PostgreSQL + pgvector.** Подключение через `asyncpg` или `psycopg2` из FastAPI.
...
**Развертывание**: Frontend на Firebase Hosting, Backend на **Koyeb (Hobby Plan, Frankfurt)**, База Данных (Neon.tech), Хранилище (**Backblaze B2**), Аутентификация (Firebase Authentication).
...

1.2. Ключевые Направления Разработки (Стратегические и Тактические – Актуализировано, с сохранением R&D деталей из v30.0++)
A. ФРОНТЕНД: ... (без изменений, кроме взаимодействия с бэкендом)
... (загрузка чанков **через бэкенд на Koyeb в Backblaze B2**, базовое управление, чат с Триа **через FastAPI эндпоинты на Koyeb**).
...

B. БЭКЕНД: РЕАЛИЗАЦИЯ ТЕКУЩЕЙ ЛОГИКИ НА **KOYEB (FASTAPI)** (Высший приоритет)

Основной фокус: Реализация всей бэкенд-логики для текущего этапа в виде **FastAPI приложения на Python, развернутого на Koyeb (Hobby Plan, Frankfurt) через интеграцию с GitHub (возможно, с использованием Dockerfile для сборки)**, как детализировано в `ULTIMATE_ROAD_TO_MVP_JUNE_9.md`.
Ключевые задачи:
Настройка и интеграция с Firebase Authentication для защиты **FastAPI эндпоинтов** (проверка JWT токенов).
Взаимодействие с Neon.tech PostgreSQL ...
Работа с **Backblaze B2** (через `boto3` ...) для загрузки и управления "чанками" данных.
Прямые вызовы Mistral/Devstral или Google Gemini API из **FastAPI эндпоинтов на Koyeb** для базовой логики AI "Триа"...
Обеспечение корректной обработки запросов от фронтенда...

C. МУЛЬТИМОДАЛЬНОСТЬ И R&D ... (без изменений)
D. ДЕЦЕНТРАЛИЗАЦИЯ, "HOLOGRAPH" И ПРОТОКОЛ NETHOLOGLYPH ... (без изменений)

1.3. Ключевые Термины и Технологии (Расширенный Список, адаптировано)

Категория	Технологии/Концепции
...
Бэкенд	Python (3.11+), **FastAPI**, **Koyeb (Hobby Plan, Frankfurt)**, `asyncpg` / `psycopg2-binary` (для PostgreSQL), `SQLAlchemy` (опционально), **`boto3` (для Backblaze B2)**
...
Развертывание / Deployment	**Koyeb (Backend, Hobby Plan, Frankfurt)**, Firebase Hosting (Frontend), **Backblaze B2 (Storage)**
Инструменты Разработки	Firebase Studio (Project IDX – основная среда), GitHub Copilot Chat (вспомогательный), Trae IDE (для специфических задач), Git, GitHub, GitHub Copilot Agent Mode (резерв), **Docker (для сборки и развертывания на Koyeb)**. Firebase Local Emulator Suite (для фронтенда, аутентификации).
...

1.4. Философия и Принципы Разработки (Адаптировано к Koyeb/R2/Neon и AI взаимодействию, с сохранением деталей из v30.0++)
... особенно в области мультимодального AI и его интеграции с выбранным стеком облачных сервисов (**Koyeb, Backblaze B2, Neon.tech, Firebase**).
...
Приоритет Ручного Контроля и Глубокого Понимания: ... включая конфигурацию и взаимодействие сервисов **Koyeb, R2, Neon.tech и Firebase**. При возникновении сложных проблем... приоритет отдается ручной отладке, анализу логов (например, из **Koyeb**) и ручным исправлениям.
Бескомпромиссное Качество и Чистота Кода (Адаптировано для FastAPI на Koyeb):
... Для бэкенда – разработка **модульного FastAPI приложения, развертываемого на Koyeb (возможно, через Docker)**...
Глубокое и Актуальное Документирование: ... Особое внимание уделяется документированию конфигураций **FastAPI, Koyeb, R2, Neon.tech** и логики бэкенд-сервисов. Все AI-ассистенты должны рассматривать официальную документацию, начиная с `CONCEPT_AND_PHILOSOPHY.md`, как первоисточник для понимания задач и архитектуры.
Безопасность и Приватность (**Koyeb/R2/Neon-ориентированный подход**): ... Переменные окружения на **Koyeb** для управления API-ключами...
Среда Разработки и Развертывания (**Текущий Стек**):
... Локальный запуск FastAPI для тестирования бэкенда.
Развертывание: Frontend развертывается на Firebase Hosting. Бэкенд реализован как **FastAPI приложение на Koyeb (Hobby Plan, Frankfurt)**. База данных – Neon.tech PostgreSQL. **Backblaze B2** используется для хранения медиа-чанков.
...

**1.4.1. Взаимодействие с AI-ассистентами (Jules, "Flash", NeuroCoder) и Управление Проектом**
(Сохраняется существующий текст из v32.0++).

1.5. Концепция Осей Голограммы (Детализированная, с учетом вейвлетов и психоакустики)
(Сохраняется существующий текст из v32.0++).

1.6. Долгосрочные Видение и Цели (Манифест Будущего – Текущий стек как основа)
Текущая реализация, построенная на **Koyeb, Backblaze B2, Neon.tech и Firebase**, является первым шагом к реализации нашего долгосрочного видения.
...
AI-Ассистент "Триа" – Эволюционирующий Партнер: Развитие Триа от текущей реализации на **FastAPI (на Koyeb)** к полноценной самообучающейся сети ботов...

II. Архитектура и Текущее Состояние

2.1. Инфраструктура "Трех Столпов"
Проект "Голографические Медиа" теперь базируется на архитектуре "трех столпов", обеспечивающей четкое разделение функций и масштабируемость:

-   **Koyeb (Администратор):** Платформа Koyeb служит для размещения основного управляющего приложения – бэкенда на FastAPI. Koyeb выполняет роль "Администратора", принимая все входящие запросы от клиентских приложений, запуская бизнес-логику, оркеструя взаимодействие с другими компонентами системы и управляя жизненным циклом AI "Триа". Используется Hobby Plan (Frankfurt) с развертыванием из GitHub.

-   **Backblaze B2 (Склад):** Сервис Backblaze B2 выполняет роль "Склада". Это S3-совместимое объектное хранилище используется для надежного и долговременного хранения всех бинарных "чанков" данных: аудиозаписей, видеофрагментов, данных о жестах, и других крупных медиа-файлов, которые генерируются или загружаются пользователями. Бэкенд на Koyeb взаимодействует с B2 для загрузки и получения доступа к этим файлам.

-   **Neon.tech (Журнал):** База данных Neon.tech (PostgreSQL) функционирует как "Журнал" системы. Здесь хранятся все структурированные данные: метаданные "чанков" (описания, теги, ссылки на файлы в Backblaze B2), информация о пользователях, логи состояния и работы системы, а также данные, необходимые для процесса "медленного обучения" AI "Триа" и функционирования AZR.

2.2. Бэкенд (Оркестратор на Koyeb)
Бэкенд-система проекта разработана как приложение на Python с использованием фреймворка FastAPI и развернута на платформе Koyeb.

-   **Платформа и Технологии:** Работает на Koyeb, используя Python 3.11+ и FastAPI для создания API-эндпоинтов.
-   **Взаимодействие с "Тремя Столпами":**
    -   **Backblaze B2:** Активно взаимодействует с Backblaze B2 (через `boto3`) для всех операций, связанных с файлами "чанков" – загрузка, генерация временных ссылок для доступа, управление метаданными файлов.
    -   **Neon.tech:** Подключается к базе данных Neon.tech для сохранения и извлечения всех структурированных данных, включая пользовательские профили, описания голограмм, логи взаимодействий и состояния AI "Триа".
-   **Роль Оркестратора:** Бэкенд выполняет центральную роль в оркестрации всех процессов в системе. Он обрабатывает запросы от фронтенда, управляет аутентификацией пользователей (через Firebase Authentication токены), коордирует работу AI "Триа" и обеспечивает целостность данных между "Складом" (B2) и "Журналом" (Neon.tech).

2.3. AI "Триа" (Экосистема Ботов)
AI "Триа" – это не просто набор логических правил на FastAPI эндпоинтах, а развивающаяся экосистема специализированных ботов, для которой заложен технологический каркас.

-   **Состав Экосистемы:**
    -   `GestureBot`: Ответственен за анализ и интерпретацию жестовых данных.
    -   `MemoryBot`: Управляет доступом к базе знаний, памяти Триа (в Neon.tech) и связанным "чанкам" (в Backblaze B2).
    -   `LearningBot`: Ключевой компонент для "медленного обучения" и адаптации Триа, включая механизмы AZR (Absolute Zero Reasoning).
    (Эти боты имеют свои реализации в `backend/tria_bots/`).
-   **Оркестрация и Развитие:**
    -   Текущая координация ботов осуществляется через `CoordinationService` в рамках FastAPI приложения.
    -   В перспективе планируется использование более сложных инструментов оркестрации, таких как `LangChain` или `LangGraph`, для построения продвинутых цепочек рассуждений и взаимодействия ботов.
-   **Функционирование в Архитектуре:** Логика ботов выполняется на Koyeb как часть бэкенд-приложения. Они оперируют данными, хранящимися в Neon.tech (структурированная информация, логи для обучения) и Backblaze B2 (сырые "чанки" для анализа).

III. Ключевые Проблемы и Задачи (Focus на текущем стеке Koyeb/R2/Neon)
3.1. Общая Стратегия Решения Проблем
... используя **текущий стек: Koyeb для бэкенда, Backblaze B2 для хранения, Neon.tech для БД и Firebase для фронтенда/аутентификации**.

3.2. Основные Технические Вызовы для текущего этапа (Текущий Стек):
...
Реализация Бэкенда на **Koyeb (FastAPI)**:
Задача: Создание и тестирование **FastAPI приложения** для всей серверной логики текущего этапа, развернутого на Koyeb.
Вызовы: **Ограничения Koyeb Hobby Plan (производительность, возможное засыпание сервиса, лимиты по CPU/памяти, ограничения на кастомные домены на бесплатных/hobby тирах), настройка Dockerfile (если используется) для оптимальной сборки и работы на Koyeb, время сборки на Koyeb, выбор региона (Frankfurt), управление зависимостями Python, обработка ошибок и таймаутов, обеспечение безопасности FastAPI эндпоинтов, настройка CI/CD для Koyeb.**
Интеграция с **Neon.tech PostgreSQL и Backblaze B2** из среды Koyeb:
Задача: Надежное сохранение и извлечение данных (Neon.tech) и файлов (B2).
Вызовы: **Корректная работа с `asyncpg` или `psycopg2` (для Neon.tech) и `boto3` (для B2) из FastAPI на Koyeb, управление сетевыми задержками, настройка прав доступа к B2 бакетам и PostgreSQL.**
Ограничения Бесплатных Тиров и Экономическая Эффективность:
Задача: Реализация текущего этапа в рамках бесплатных или очень экономичных квот **Koyeb, Backblaze B2, Neon.tech, Firebase Hosting/Auth**.
Безопасность в **Текущем Стеке**:
Задача: Корректная настройка безопасности **FastAPI эндпоинтов на Koyeb, Backblaze B2 (политики доступа), Neon.tech (доступ к БД), безопасное управление API-ключами и секретами на Koyeb.**
AI-Логика Триа для текущего этапа (на FastAPI, хостинг на Koyeb):
Задача: Реализация базовой логики ответов Триа ... из **FastAPI эндпоинтов на Koyeb**.
- **Реализация CWT на WebAssembly**:
  Задача: Разработка и интеграция модуля Continuous Wavelet Transform (CWT) на WebAssembly для клиентского анализа аудиоданных.
  Вызовы: Оптимизация производительности WASM модуля, управление памятью, обеспечение кросс-браузерной совместимости, интеграция с существующим JavaScript кодом аудиотракта.

- **Обучение `GestureBot` на первых 'чанках'**:
  Задача: Начать процесс обучения `GestureBot` с использованием первых собранных "чанков" жестовых данных.
  Вызовы: Разработка или адаптация пайплайна для подготовки данных (очистка, разметка, аугментация), выбор или тонкая настройка модели для распознавания жестов, определение метрик качества, создание цикла обратной связи для улучшения модели.

- **Оптимизация рендеринга `InstancedMesh`**:
  Задача: Улучшение производительности рендеринга большого количества объектов на стороне клиента с использованием `InstancedMesh` в Three.js.
  Вызовы: Эффективное управление данными инстансов, оптимизация шейдеров, работа с visibility culling для инстансов, минимизация CPU overhead при обновлении атрибутов инстансов.

3.3. Приоритеты в Разработке
2.  Загрузка и сохранение "чанков" (**Backblaze B2** + **FastAPI на Koyeb** + Neon.tech).
(Остальное без изменений)

IV. План Развития AI "Триа" (Основан на WHITEGHOST.md)

4.1. Общая Философия и Цели (по WHITEGHOST.md)
Развитие AI "Триа" следует философии, изложенной в `docs/02_RESEARCH/WHITEGHOST.md`, где ключевым принципом является "Триа собирает себя сама". Это означает, что Триа должна непрерывно обучаться и эволюционировать на основе взаимодействий с пользователями и анализа окружающего контекста. Основой для этого служат "комбинированные аудиовизуально-жестовые фрагменты" ("чанки"), которые Триа обрабатывает, используя концепции, такие как Динамическая Семантическая Типизация для глубокого понимания данных и, в перспективе, "жидкий код" для адаптации собственной логики. Текущая реализация на FastAPI (Koyeb) с хранением данных в Backblaze B2 и Neon.tech является фундаментом для этого эволюционного процесса.

4.2. Фаза 1: Создание Каркаса Ботов и Сбор Данных для "Медленного Обучения"
Первый этап направлен на создание основной инфраструктуры для ботов Триа, организацию процесса сбора "чанков" и внедрение системы логирования, необходимой для будущего "медленного обучения".

-   **Разработка и Интеграция Базовых Ботов (Каркас):**
    -   `GestureBot`: Начальная реализация для приема, структурирования и сохранения данных жестов (например, от MediaPipe или аналогичных источников) как части "чанков". Основной фокус – корректное формирование данных для последующего анализа.
    -   `AudioBot`: Базовая реализация для приема аудиопотоков и их структурирования в "чанках". Включает сохранение аудиоданных и их метаописаний.
    -   `MemoryBot`: Начальная реализация, отвечающая за взаимодействие с Neon.tech для сохранения/извлечения метаданных "чанков" и другой структурированной информации, а также за связь с файлами "чанков" в Backblaze B2.
    -   `LearningBot`: Создание базовой структуры и интерфейсов класса `LearningBot` и его компонентов (`TaskGenerator`, `TaskSolver`, `azr_evaluator`), которые на данном этапе будут выполнять минимальные функции или служить заглушками для будущей логики "медленного обучения" и AZR.
    -   `CoordinationService`: Обеспечение маршрутизации запросов и базового взаимодействия между вышеуказанными ботами в рамках текущей архитектуры на FastAPI (Koyeb).

-   **Настройка Сбора "Чанков":**
    -   Формализация структуры "чанка" на основе концепций из `docs/02_RESEARCH/WHITEGHOST.md`: каждый "чанк" должен включать необработанные данные (raw data), первичные семантические дескрипторы (если применимо), контекст взаимодействия и, по возможности, обратную связь от пользователя.
    -   Реализация API-эндпоинтов на FastAPI (размещенном на Koyeb) для приема мультимодальных "чанков" от клиентских приложений.
    -   Организация процесса сохранения "чанков": бинарные медиа-файлы (аудио, видео, данные сенсоров) сохраняются в Backblaze B2; структурированные метаданные, семантические дескрипторы и контекстная информация – в базу данных Neon.tech.

-   **Реализация Базового Логирования для "Медленного Обучения":**
    -   Внедрение системы логирования, фиксирующей ключевые аспекты взаимодействий пользователя с Триа: входящие запросы, действия ботов, сгенерированные ответы, и, если возможно, неявную обратную связь (например, длительность взаимодействия, последующие запросы).
    -   Сохранение этих логов в структурированном виде в Neon.tech, чтобы `LearningBot` в будущем мог их анализировать для оценки качества работы Триа и выявления областей для улучшения.

4.3. Фаза 2: Реализация Логики Ботов, Анализ "Чанков" и Первые Циклы AZR
Второй этап фокусируется на наполнении ботов интеллектуальной логикой, начале практического анализа накопленных "чанков" и запуске первых экспериментальных циклов Absolute Zero Reasoning (AZR).

-   **Развитие Интеллектуальной Логики Ботов:**
    -   `GestureBot`: Интеграция моделей машинного обучения (разработанных или адаптированных) для распознавания и семантической интерпретации жестов. Применение принципов Динамической Семантической Типизации для обогащения понимания жестов.
    -   `AudioBot`: Внедрение продвинутых техник анализа аудио, таких как Continuous Wavelet Transform (CWT), возможно, с использованием WebAssembly модулей для клиентской или серверной обработки, с целью извлечения более глубоких характеристик из речи и звуков.
    -   `MemoryBot`: Расширение функционала для управления базой знаний Триа, включая семантический поиск по "чанкам" и контекстуальным данным, а также формирование более сложных ассоциативных связей.

-   **Начало Анализа "Чанков" Компонентом `LearningBot`:**
    -   Разработка первых алгоритмов внутри `LearningBot` для автоматического анализа собранных на Фазе 1 "чанков".
    -   Цели анализа: выявление паттернов во взаимодействиях, оценка эффективности различных ответов и стратегий Триа, идентификация успешных и неуспешных коммуникативных сценариев.
    -   Результаты анализа должны служить основой для генерации гипотез по улучшению поведения других ботов.

-   **Первые Экспериментальные Циклы Absolute Zero Reasoning (AZR):**
    -   Реализация базовых механизмов AZR в `LearningBot` и его саб-компонентах (`TaskGenerator`, `TaskSolver`, `azr_evaluator`).
    -   `TaskGenerator` будет формулировать простые задачи или вопросы для Триа, основанные на имеющихся данных, но требующие вывода или решения, не заложенного явно.
    -   `TaskSolver` (представляющий собой кооперацию других ботов под управлением `LearningBot`) будет пытаться решить эти задачи.
    -   `azr_evaluator` будет оценивать успешность решений и предоставлять обратную связь для корректировки логики `LearningBot`.
    -   Начальный фокус на простых, контролируемых сценариях для отладки цикла AZR.

-   **Исследование "Жидкого Кода" (Долгосрочная Перспектива):**
    -   Концептуальное исследование и прототипирование (если возможно в рамках текущего стека) механизмов, вдохновленных "жидким кодом" из `docs/02_RESEARCH/WHITEGHOST.md`. Это включает изучение способов, которыми `LearningBot` мог бы динамически адаптировать или предлагать изменения в логике других ботов на основе результатов своего анализа и AZR.

4.4. Риски и Меры (Специфичные для Развития Триа)
-   **Качество и Разнообразие "Чанков":** Низкое качество или недостаточное разнообразие собираемых "чанков" может замедлить обучение Триа.
    *Мера:* Разработка четких гайдлайнов для пользователей (если применимо), внедрение механизмов валидации и фильтрации "чанков", стимулирование разнообразных взаимодействий.
-   **Сложность Реализации "Медленного Обучения" и AZR:** Разработка эффективных алгоритмов для `LearningBot` и AZR является нетривиальной R&D задачей.
    *Мера:* Итеративный подход, начало с простых моделей и сценариев, активное использование результатов исследований в области AI и машинного обучения.
-   **Интеграция и Оркестрация Ботов:** По мере усложнения логики ботов, их эффективная координация может стать вызовом.
    *Мера:* Постепенное усложнение `CoordinationService`, исследование и возможное внедрение фреймворков типа `LangChain` или `LangGraph` для управления сложными AI-потоками, если это будет оправдано и совместимо с основной архитектурой.
-   **Зависимость от Внешних LLM:** Качество и доступность внешних LLM (например, Mistral) могут влиять на способности Триа.
    *Мера:* Проектирование системы с возможностью гибкой замены или дополнения LLM, исследование локальных или более специализированных моделей для определенных задач.

V. Принципы Работы с AI
5.1. Общая Роль AI в Проекте
... генерации кода (Python для **FastAPI на Koyeb**, JavaScript для фронтенда)... для бэкенда – локальная разработка с AI-инструментами и последующий деплой на **Koyeb через GitHub**.

5.6. Критическое Мышление и Оптимизация
...особенно в контексте использования сервисов **Koyeb, Cloudflare R2, Neon.tech, Firebase**.
Приоритеты: ... модульность **FastAPI приложения на Koyeb**...

5.7. Приоритеты для AI (Focus на текущем стеке Koyeb/R2/Neon)
1.  **Реализация текущего стека на Koyeb/R2/Neon/Firebase**: Помощь в разработке и отладке кода для фронтенда (Firebase Hosting) и бэкенда (**FastAPI на Python, деплой на Koyeb**).
2.  **Интеграция Сервисов**: Корректное использование Firebase Authentication, **Cloudflare R2, Neon.tech PostgreSQL** (через FastAPI на Koyeb).
5.  **Оптимизация для Koyeb/FastAPI**: Предложения по оптимизации кода FastAPI и Dockerfile (если используется) для эффективного использования ресурсов Koyeb и соблюдения ограничений Hobby Plan.

VI. Используемые Инструменты и Технологии (Обновлено для Koyeb/R2/Neon)
6.1. Общая Стратегия Использования Инструментов
Проект "Голографические Медиа" ориентирован на использование **Koyeb для хостинга бэкенда FastAPI, Cloudflare R2 для объектного хранения, Neon.tech PostgreSQL для базы данных и Firebase (Hosting, Authentication) для фронтенда и аутентификации.**

6.2. Инструменты Разработки
... Docker: Используется для создания консистентных сред разработки и **для сборки и развертывания FastAPI приложения на Koyeb (если выбран такой метод деплоя).**
(Удалено: PythonAnywhere)

6.3. Инструменты Качества Кода и Тестирования
... **Развертывание FastAPI на Koyeb может быть автоматизировано через GitHub Actions (например, при коммите в основную ветку, Koyeb автоматически забирает изменения).**

6.5. Технологии Бэкенда
**FastAPI (Python 3.11+ на Koyeb, Hobby Plan, Frankfurt)**: Основная технология для реализации серверной логики.
... (Удалено: PythonAnywhere).

VII. Полезные Команды (Обновлено для Koyeb/FastAPI)
(Удален подраздел 7.2.1 PythonAnywhere Команды)
**7.2.1. Koyeb Команды (Управление Бэкенд Приложением)**
-   **Развертывание**: Обычно автоматически при `git push` в основную ветку GitHub репозитория, если Koyeb сервис настроен на отслеживание этой ветки. Также возможно ручное развертывание через UI Koyeb или Koyeb CLI.
-   **Koyeb CLI (если используется)**:
    -   `koyeb login`
    -   `koyeb services list`
    -   `koyeb deployments get <deployment_id>`
    -   `koyeb instances logs <instance_id>`
    -   (команды могут отличаться, проверить актуальную документацию Koyeb CLI)
-   **Просмотр логов**: Через UI Koyeb (логи сервиса, логи билда).
-   **Переменные окружения**: Устанавливаются в настройках сервиса на Koyeb.
-   **Docker (если используется для Koyeb)**:
    -   `docker build -t <image_name> .` (локальная сборка)
    -   `docker run -p 8000:8000 <image_name>` (локальный запуск)
    -   `docker push <registry>/<image_name>:<tag>` (если деплой через Docker Registry)

7.5. Тестирование и Диагностика (Общее)
Логи **FastAPI на Koyeb**: Доступны через веб-интерфейс Koyeb.
Тестирование **FastAPI эндпоинтов**: ... к приложению на Koyeb (URL вида `<app-name>-<org-name>.koyeb.app`).
Пример с curl для Koyeb: `curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer <FIREBASE_ID_TOKEN>" -d '{"message": "Привет"}' https://<app-name>-<org-name>.koyeb.app/api/v1/chat` (путь к вашему эндпоинту).

7.6. Управление Переменными Окружения и Секретами
**Koyeb**: Переменные окружения устанавливаются через настройки сервиса в UI Koyeb. Они доступны в вашем Python коде через `os.environ.get('VAR_NAME')`.
(Удалено: PythonAnywhere).

VIII. Конфиденциальные Данные (Актуализировано для Koyeb/R2/Neon)
8.1. Общие Принципы Хранения
-   **Koyeb Environment Variables**: Основной механизм для хранения секретов для FastAPI приложения (API ключи LLM, строка подключения Neon.tech, ключи доступа Cloudflare R2). Устанавливаются через веб-интерфейс Koyeb.
(Удалено: PythonAnywhere).

8.2. Список Конфиденциальных Данных (Примеры)
-   **Koyeb**: Специфические токены или ключи API для Koyeb, если используются для управления через API.
-   Firebase/Google Cloud: **Ключ сервисного аккаунта Google (GOOGLE_APPLICATION_CREDENTIALS)**: JSON файл ключа, который может потребоваться для `firebase-admin` SDK на **Koyeb**. Этот файл должен быть безопасно добавлен в переменные окружения Koyeb (например, как base64 строка или через секреты Koyeb, если поддерживается).

8.4. Интеграция с Кодом (**FastAPI на Koyeb**)
Доступ к секретам, установленным как переменные окружения на Koyeb:
```python
import os
import firebase_admin # Пример
from firebase_admin import credentials # Пример
import base64 # Для декодирования GOOGLE_APPLICATION_CREDENTIALS из base64, если так хранится
import json # Для парсинга JSON ключа

# Пример доступа к переменной окружения в FastAPI приложении на Koyeb:
r2_access_key_id = os.environ.get('R2_ACCESS_KEY_ID')
neon_db_connection_string = os.environ.get('NEON_DB_CONNECTION_STRING')
mistral_api_key = os.environ.get('MISTRAL_API_KEY')

# Для инициализации firebase-admin, если используется для проверки токенов:
google_creds_base64 = os.environ.get('GOOGLE_APPLICATION_CREDENTIALS_BASE64') 
if google_creds_base64:
    try:
        if not firebase_admin._apps:
            decoded_creds = base64.b64decode(google_creds_base64)
            cred_json = json.loads(decoded_creds)
            cred = credentials.Certificate(cred_json)
            firebase_admin.initialize_app(cred)
    except Exception as e:
        print(f"Error initializing Firebase Admin SDK from Base64: {e}") 
else:
    # Альтернативно, если GOOGLE_APPLICATION_CREDENTIALS указывает на путь к файлу в контейнере Koyeb
    google_creds_path = os.environ.get('GOOGLE_APPLICATION_CREDENTIALS')
    if google_creds_path:
        try:
            if not firebase_admin._apps:
                 cred = credentials.Certificate(google_creds_path)
                 firebase_admin.initialize_app(cred)
        except Exception as e:
            print(f"Error initializing Firebase Admin SDK from path: {e}")
    else:
        print("GOOGLE_APPLICATION_CREDENTIALS or its Base64 version not set for Koyeb.")
```

IX. Обратная Связь и Планы Тестирования (Обновлено для текущего стека)
9.1. Общие Принципы Тестирования... текущий этап фокусируется на достижении стабильной функциональности **на стеке Koyeb, Cloudflare R2, Neon.tech и Firebase**.

9.2. План Внутреннего Тестирования (Текущий Стек)
Цель: Проверить работоспособность ключевых функций текущего этапа, развернутых на **Koyeb и Firebase Hosting**...
Этап 1: Тестирование Фронтенда на Firebase Hosting (API запросы идут на Koyeb).
Этап 2: Тестирование **FastAPI Бэкенда на Koyeb**
Задачи:
- Проверка FastAPI эндпоинтов на Koyeb...
- Анализ логов **Koyeb** для выявления ошибок и оценки производительности.
Инструменты: Postman/curl (для HTTP-запросов к FastAPI на Koyeb), **веб-интерфейс Koyeb (логи, метрики)**, `psql`.

Этап 3: Интеграционное Тестирование (E2E для текущего этапа)
Задачи:
- Сквозное тестирование всего цикла:
    2. Загрузка медиа-"чанка" (Frontend -> **FastAPI на Koyeb** -> Cloudflare R2).
Инструменты: ..., **логи Koyeb**, Firebase Console (для Auth, Hosting).

9.4. Автоматизация Тестирования (Постепенное Внедрение)
CI/CD: ... **Автоматизация развертывания на Koyeb (через GitHub Actions триггеря Koyeb или напрямую деплоя Docker образа) и Firebase Hosting.**

9.5. Риски и Меры (в контексте тестирования)
Риск 2: Сложности с отладкой интеграционных проблем **между Firebase Hosting, Koyeb, R2 и Neon.tech**.
Риск 3: Ограничения среды **Koyeb Hobby Plan** (засыпание, лимиты ресурсов) могут влиять на тесты производительности или длительные операции.
Мера: Осознание этих ограничений, фокус на функциональном тестировании для текущего этапа. Использование платных планов Koyeb или других платформ для более серьезного тестирования производительности.

X. Долгосрочные Цели и Видение (Актуализировано с учетом текущего стека)
10.1. Общее Видение Проекта
... текущая реализация, построенная на **Koyeb, Cloudflare R2, Neon.tech и Firebase**, является первым шагом...

10.5. Стратегические Риски и Меры (Долгосрочные)
Риск 4: Эволюция облачных платформ (**Koyeb, Cloudflare, Neon.tech, Firebase/GCP**)...
```
