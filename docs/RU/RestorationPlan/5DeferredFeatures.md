# Функция 5: Отложенные и Неполностью Реализованные Функции

## 1. Обзор Обсуждаемых, Но Отложенных Функций

На основе анализа `PROMPT.txt` и комментариев/TODO в `script.js.txt`, можно выделить несколько функций, которые были запланированы или находились в начальной стадии разработки, но не были полностью реализованы в исследуемой версии `script.js.txt`.

### Из `PROMPT.txt`:

*   **Интерактивное управление через жесты (полная реализация):**
    *   Хотя отслеживание рук и базовая визуализация были реализованы, `PROMPT.txt` упоминает "Управление жестами" как часть XR-режима и "Дополнительные функции (жесты...)" в UI. Конкретные управляющие жесты (кроме панорамирования для вращения) не были детализированы или реализованы в `script.js.txt` (например, жесты для масштабирования, переключения режимов, управления плеером и т.д.).
    *   **Цитата из PROMPT.txt (Функциональность -> 3D Визуализация -> XR режим):** "Управление жестами".

*   **XR-режим с отслеживанием рук (полноценный):**
    *   `PROMPT.txt` указывает на "XR-режим с отслеживанием рук" и "Визуализация точек пальцев". Базовое переключение в XR-режим (`isXRMode`) и отображение 3D-рук в сцене есть. Однако, полноценный XR-опыт, возможно, включающий взаимодействие с виртуальным окружением или более глубокую интеграцию с VR/AR устройствами, не был завершен.
    *   **Цитата из PROMPT.txt (Цель):** "XR-режим с отслеживанием рук".
    *   **Цитата из PROMPT.txt (Важные замечания):** "Известные проблемы с XR режимом".

*   **Backend (MVP) - Node.js + Express.js, MongoDB (локальная):**
    *   `PROMPT.txt` описывает этот бэкенд. `script.js.txt` взаимодействует с эндпоинтами (`/generate`, `/branches`, `/chat`, `/chat/history`), что подтверждает наличие бэкенда. Однако полнота реализации всех CRUD операций для версий, управления пользователями (если планировалось), или других серверных логик остается за рамками анализа `script.js.txt`. Сохранение `fileContents` и `sceneState` на бэкенде было реализовано.

*   **Интерактивная навигация по временной шкале (`#timeline-container`):**
    *   `PROMPT.txt` упоминает: "Временная шкала: Визуализация прогресса, Интерактивная навигация".
    *   В `script.js.txt` есть обработчик кликов по `#timeline-container` для аудиофайлов, позволяющий перемещаться по треку. Однако, если имелась в виду более сложная навигация по *версиям* через эту же временную шкалу (а не только через правую панель версий), то эта часть не была явно реализована. Таймлайн версий (`#versionFrames`) был отдельным элементом.

*   **Модальные окна для жестов и промптов:**
    *   `PROMPT.txt` (Структура кода -> index.html): "Модальные окна для жестов и промптов".
    *   В `script.js.txt` есть ссылки на `gestureModal` и `promptModal` и их элементы управления (`closeGestureModal`, `submitPromptButton` и т.д.). Модальное окно для промптов (`#promptModal` с `#promptText` и `#submitPrompt`) использовалось для основного ввода промпта перед тем, как был добавлен `#topPromptInput`. Модальное окно для жестов (`#gestureModal` с `#modalGestureCanvas`) содержало симуляцию записи жеста, но не было интегрировано с основной системой записи жестов через `#gesture-area`.

### Из комментариев и TODO в `script.js.txt`:

*   **Запись и обработка жестов (`startGestureRecording`, `stopGestureRecording`):**
    *   Функции содержат комментарии `// TODO: Добавить здесь логику сбора данных жеста (например, из MediaPipe)` и `// TODO: Добавить здесь логику обработки/отправки записанных данных жеста`. Это указывает на то, что сам механизм записи был заложен, но фактический сбор данных о траектории жеста, его характеристиках и последующая отправка или интерпретация не были реализованы.
    *   **Фрагмент кода:**
        ```javascript
        function startGestureRecording() {
          // ...
          console.log("Начало записи жеста.");
          // TODO: Добавить здесь логику сбора данных жеста (например, из MediaPipe)
          // ...
        }
        function stopGestureRecording() {
          // ...
          console.log("Остановка записи жеста.");
          // TODO: Добавить здесь логику обработки/отправки записанных данных жеста
        }
        ```

*   **Bluetooth функциональность (`#bluetoothButton`, `connectBluetooth`):**
    *   В `DOMContentLoaded` есть `const bluetoothButton = document.getElementById('bluetoothButton');`. В `script(1-6).js.txt` была функция `connectBluetooth()` и модальное окно для Bluetooth, но в финальном `script.js.txt` сама функция `connectBluetooth` отсутствует, хотя кнопка инициализируется. Это говорит о том, что интеграция с Bluetooth устройствами была начата или планировалась, но отложена или удалена из активной разработки в этой версии.

*   **Функция сканирования (`#scanButton`, `initQRScanner`):**
    *   Аналогично Bluetooth, кнопка `#scanButton` инициализируется, но функция `initQRScanner` (присутствовавшая в `script(1-6).js.txt` для работы с QR-кодами) в `script.js.txt` отсутствует.

*   **Старая система загрузки голограмм (`loadHologram`):**
    *   Закомментированный блок с `GLTFLoader` и функцией `loadHologram(version)` для загрузки `.glb` файлов напрямую, вместо восстановления состояния сцены из JSON. Это указывает на эволюцию подхода к управлению версиями.
    *   **Фрагмент кода:**
        ```javascript
        // const hologramVersions = {
        //     v1: 'test.glb',
        //     v2: 'test.glb'
        // };
        // async function loadHologram(version) { /* ... */ }
        ```

*   **Неиспользуемые элементы управления камерой (`toggleCameraButton`):**
    *   Инициализируется `const toggleCameraButton = document.getElementById('toggleCameraButton');`, но для него нет обработчика событий в `script.js.txt`.

## 2. Потенциальная Ценность и Рекомендации

*   **Полное жестовое управление:** Реализация конкретных жестов для управления параметрами голограммы (масштаб, вращение, выбор элементов, управление плеером) значительно повысила бы интерактивность, особенно в XR-режиме. Рекомендуется определить набор интуитивных жестов и реализовать их распознавание на основе данных MediaPipe.
*   **Улучшенный XR-режим:** Устранение "известных проблем" и, возможно, добавление более глубокой интеграции с WebXR API для полноценного VR/AR опыта.
*   **Запись и использование жестов:** Завершение TODO в `startGestureRecording` и `stopGestureRecording` позволило бы пользователям записывать собственные жесты, которые могли бы быть использованы для триггеров или управления. Это требует определения формата данных для жеста и механизма их сохранения/распознавания.
*   **Bluetooth/QR-сканер:** Если эти функции все еще актуальны для проекта (например, для управления с других устройств или импорта/экспорта данных), их стоит пересмотреть и интегрировать в новую архитектуру.
*   **Интерактивная навигация по аудио-таймлайну:** Если кликабельный таймлайн `#timeline-container` предназначался не только для аудио, но и для навигации по версиям, это могло бы быть альтернативным способом выбора версий. Стоит уточнить его первоначальное предназначение.

При восстановлении этих функций важно будет учитывать текущую архитектуру проекта, использовать модульный подход и обеспечить их гармоничную интеграцию с уже существующими и восстанавливаемыми компонентами.
