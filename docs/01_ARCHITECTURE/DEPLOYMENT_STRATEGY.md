# Стратегия Деплоя Firebase Cloud Functions

**ID для отчета:** [20240726-1018-020]
**Цель:** Описание текущей стратегии деплоя Firebase Cloud Functions в проекте.

## Анализ Компонентов Деплоя:

1.  **`backend/main.py`:**
    *   Этот файл в настоящее время пуст и помечен как предназначенный для будущего использования (`# Intentionally empty, will be populated later.`). Это означает, что `backend/main.py` на данный момент не служит основной точкой входа для централизованного FastAPI приложения, которое бы инкапсулировало все Cloud Functions.

2.  **`firebase.json`:**
    *   Конфигурация в `firebase.json` (раздел `functions`) указывает:
        *   `"source": "backend"`: Это означает, что Firebase CLI будет сканировать директорию `backend/` для обнаружения функций.
        *   `"runtime": "python312"`: Указывает используемую версию Python для функций.
        *   `"codebase": "holograms-backend"`: Определяет имя для группы функций, что полезно для организации и деплоя нескольких сервисов в одном проекте Firebase.
    *   Важно отметить, что `firebase.json` указывает на корневую директорию `backend/` как источник, а не на конкретные поддиректории внутри `backend/cloud_functions/`.

3.  **`backend/cloud_functions/*/main.py` файлы:**
    *   Директория `backend/cloud_functions/` содержит несколько поддиректорий (`auth_sync`, `process_chunk`, `tria_chat_handler` и т.д.), каждая из которых содержит свой собственный `main.py` файл и `requirements.txt`. Например:
        *   `backend/cloud_functions/auth_sync/main.py`
        *   `backend/cloud_functions/process_chunk/main.py`
        *   `backend/cloud_functions/tria_chat_handler/main.py`
    *   Эта структура является стандартным подходом для деплоя **отдельных, независимых Cloud Functions** в Firebase/Google Cloud Functions. Каждый файл `main.py` в этих поддиректориях действует как точка входа для своей конкретной функции.

## Вывод о Стратегии Деплоя:

На основе анализа, текущая стратегия деплоя Firebase Cloud Functions в проекте соответствует **Варианту 1: Индивидуальный деплой функций**.

*   Каждая функция (например, `auth_sync`, `process_chunk`, `tria_chat_handler`) находится в своей собственной поддиректории внутри `backend/cloud_functions/`.
*   Файл `main.py` в каждой из этих поддиректорий служит точкой входа для соответствующей Cloud Function.
*   Firebase CLI, при деплое из директории `backend/` (как указано в `firebase.json`), обнаруживает эти отдельные функции и деплоит их как самостоятельные сущности.
*   `backend/main.py` в корневой директории `backend/` пока не играет активной роли в деплое Cloud Functions и, вероятно, зарезервирован для других целей (например, для локальной разработки или для будущего централизованного API).

Эта стратегия обеспечивает модульность и независимость каждой функции, что упрощает их разработку, тестирование и масштабирование по отдельности.