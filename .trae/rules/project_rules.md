# Project Rules for Holograms Media (holograms.media) - v29.2

## 0. Актуальный Контекст Проекта (КРИТИЧЕСКИ ВАЖНО!)
- **Перед выполнением любой задачи, AI ОБЯЗАН ознакомиться с файлами `PROJECT_CONTEXT.md` и `tria_memory_buffer.md` в корне проекта (БЕЗ "@").** Эти файлы содержат актуальный срез состояния, цели и историю.
- Если эти файлы отсутствуют или критически устарели, первой задачей AI должно быть их создание/актуализация.
- **Системная Инструкция (v29.0+) и `ARCHITECTURE.md`** являются основными документами, описывающими архитектуру и цели. Ссылайся на них при необходимости.

## 1. General Principles & Philosophy
- **R&D Platform:** Инновации, новая парадигма коммуникации.
- **Open Source (MIT):** Чистый, **модульный** код.
- **Итеративность:** Микро-шаги, рефакторинг – непрерывный процесс.
- **Нейрокодинг + Верификация:** Trae IDE (Агент "NeuroCoderZ" с Claude 3.x/Gemini 2.5+) – основной инструмент. **Весь AI-код тщательно проверяется, тестируется и ПОНИМАЕТСЯ НейроКодером перед коммитом.**
- **Документирование:** Актуальная Системная Инструкция, `ARCHITECTURE.md`, `PROJECT_CONTEXT.md`, `tria_memory_buffer.md`, README.
- **Безопасность:** Секреты только через переменные окружения.

## 2. Core Technologies & Stack (Целевая)
- **Backend:** Python 3.12+, FastAPI, Uvicorn, **PostgreSQL + `pgvector`**.
- **Frontend:** JavaScript (ES6 Modules), Three.js, **WebGPU (цель)**, WebRTC, Web Audio API, MediaPipe Hands.
- **AI "Триа":** Сеть ботов, LangChain, RAG.
- **Развертывание:** Hugging Face Spaces (Docker).
- **CI/CD:** GitHub Actions.

## 3. Ключевые Файлы и Их Назначение (См. `PROJECT_CONTEXT.md` для актуального списка)
- **`backend/app.py`**: Бэкенд FastAPI.
- **`frontend/js/main.js`**: Точка входа фронтенда.
- **`frontend/script.js`**: **УДАЛЕН.** Вся логика в модулях `frontend/js/`.
- **`PROJECT_CONTEXT.md`**: **Главный файл с актуальным состоянием проекта для AI.**
- **`tria_memory_buffer.md`**: Детальный лог итераций разработки (обновляется AI).
- **`ARCHITECTURE.md`**: Описание архитектуры потоков данных и Триа.

## 4. Правила Работы с Кодом
- **Коммиты:** Conventional Commits.
- **JavaScript:** ES6+, модульность. **`script.js` УДАЛЕН, поддерживаем чистоту модулей.**
- **Python:** Async/await, PEP 8.

## 5. Взаимодействие с AI-Ассистентом (Агент "NeuroCoderZ" в Trae IDE)
- **Промптинг:** По "Универсальному Шаблону Промта v3.3+" (см. User Rules). Контекст: `@workspace`, `@file`, `#Project Rules`, `PROJECT_CONTEXT.md`.
- **Ожидаемый Отчет от AI:**
    1.  Подтверждение ознакомления с `PROJECT_CONTEXT.md` и `tria_memory_buffer.md`.
    2.  Подтверждение выполнения основной задачи.
    3.  Изменения в коде (БЫЛО/СТАЛО для фрагментов).
    4.  ПОЛНЫЙ ВЫВОД терминальных команд.
    5.  **Автоматическое обновление `PROJECT_CONTEXT.md` и `tria_memory_buffer.md` (описать внесенные изменения).**
    6.  Размер измененных ключевых файлов (например, `script.js` ранее, теперь другие рефакторяемые файлы).
- **Git (через MCP GitHub или Terminal):** Только по явной "ЗАДАЧЕ НА GIT". Сервер остановлен.

## 6. Текущие Приоритеты (См. актуальный `PROJECT_CONTEXT.md`)
1.  **Стабилизация фронтенда** после рефакторинга `script.js`.
2.  **Устранение JS ошибок** (ReferenceError, интеграция модулей).
3.  **Подготовка к PostgreSQL.**

## 7. Важно для AI при модификации кода:
- **Приоритет – стабильность и завершение рефакторинга модулей.**
- Если задача неясна или противоречит `PROJECT_CONTEXT.md`, уточни.
- **Никаких предложений о ручных правках со стороны НейроКодера в отчете AI.** Либо выполняй, либо предлагай альтернативный план действий AI.